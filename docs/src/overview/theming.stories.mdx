import {Meta} from '@storybook/addon-docs';

<Meta title="Overview/Theming" />

# Theming

> The `theme` module easily provides ability to make `light` and `dark` theme.

## Installation

#### 1. Import

```ts
import {DoobooProvider} from 'dooboo-ui';
```

- if you only want to use `theme` pacakage, you can install it seperately.

  `import {ThemeProvider} from '@dooboo-ui/theme';`

  > Then use `useTheme` from `@dooboo-ui/theme`.

#### 2. Wrap your component with `DoobooProvider` with given customTheme.

```tsx
<DoobooProvider>
  <App />
</DoobooProvider>
```

## Usage

#### 1. Import `useDooboo`

```ts
import {useDooboo} from 'dooboo-ui';
```

#### 2. Retrive theme and use it

```ts
const {theme} = useDooboo();
```

Then use theme props inside your component.

```ts
{
  backgroundColor: theme.background,
  borderBottomColor: theme.primaryLight,
}
```

#### Also availabe with [emotion](https://emotion.sh/docs/@emotion/native).

```tsx
const StyledContainer = styled.SafeAreaView`
  flex: 1;
  background-color: ${({theme}) => theme.bg.basic};
  flex-direction: column;
  align-items: center;
`;
```

#### With Expo

If you are using expo, add below `userInterfaceStyle` to `automatic`.

```ts
userInterfaceStyle: 'automatic',
```

## Customizing theme

#### 1. Define colors for `light` and `dark` theme.

```ts
export const light = {
  bg: {
    basic: '#FFFFFF',
    paper: '#EDEDED',
    disabled: '#BEBEBE',
  },
  role: {
    primary: '#1B1B1B',
    secondary: '#3D8BFF',
    accent: '#6BF3C5',
    info: '#307EF1',
    link: '#A351F4',
    success: '#1CD66C',
    warning: '#E2B101',
    danger: '#F84444',
    border: '#CCCCCC',
    underlay: 'rgba(0, 0, 0, 0.16)',
    underlayContrast: 'rgba(0, 0, 0, 0.8)',
  },
  text: {
    basic: '#000000',
    label: '#4D4D4D',
    placeholder: '#787878',
    disabled: '#BEBEBE',
    validation: '#DA0000',
    contrast: '#FFFFFF',
  },
  button: {
    primary: {
      bg: '#1B1B1B',
      text: '#FFFFFF',
    },
    secondary: {
      bg: '#3D8BFF',
      text: '#FFFFFF',
    },
    success: {
      bg: '#1CD66C',
      text: '#FFFFFF',
    },
    danger: {
      bg: '#F84444',
      text: '#FFFFFF',
    },
    warning: {
      bg: '#E2B101',
      text: '#FFFFFF',
    },
    info: {
      bg: '#307EF1',
      text: '#FFFFFF',
    },
    light: {
      bg: '#E8E8E8',
      text: '#232323',
    },
    disabled: {
      bg: '#EDEDED',
      text: '#BEBEBE',
    },
  },
};

export const dark: typeof light = {
  bg: {
    basic: '#242424',
    paper: '#1E1D1D',
    disabled: '#474747',
  },
  role: {
    primary: '#FFFFFF',
    secondary: '#3D8BFF',
    accent: '#6BF3C5',
    info: '#2998FF',
    link: '#A351F4',
    success: '#2FFA86',
    warning: '#F4CC3E',
    danger: '#FF3C3C',
    border: '#363636',
    underlay: 'rgba(255, 255, 255, 0.16)',
    underlayContrast: 'rgba(255, 255, 255, 0.8)',
  },
  text: {
    basic: '#FFFFFF',
    label: '#BEBEBE',
    placeholder: '#909090',
    disabled: '#4D4D4D',
    validation: '#FF2C2C',
    contrast: '#000000',
  },
  button: {
    primary: {
      bg: '#FFFFFF',
      text: '#000000',
    },
    secondary: {
      bg: '#3D8BFF',
      text: '#000000',
    },
    success: {
      bg: '#2FFA86',
      text: '#000000',
    },
    danger: {
      bg: '#FF3C3C',
      text: '#000000',
    },
    warning: {
      bg: '#F4CC3E',
      text: '#000000',
    },
    info: {
      bg: '#2998FF',
      text: '#000000',
    },
    light: {
      bg: '#313131',
      text: '#EBEBEB',
    },
    disabled: {
      bg: '#292929',
      text: '#474747',
    },
  },
};
```

#### 2. Wrap your component with `ThemeProvider` with given customTheme.

```tsx
<ThemeProvider customTheme={{light, dark}}>
  <App />
</ThemeProvider>
```

- [Example theme.ts](https://github.com/dooboolab/hackatalk/blob/master/client/src/theme.ts)

Note that you can type your custom theme type as below

```ts
export type Theme = typeof light & DoobooThemeParams;
```

### Typescript support with [emotion](https://emotion.sh/docs/typescript#define-a-theme)

> Inside `src` dir, add `styled.d.ts`.

```ts
import type {DoobooTheme} from 'dooboo-ui';
import {Theme} from './theme';

type AllTheme = Theme & DoobooTheme;

declare module '@emotion/react' {
  export interface Theme extends AllTheme {}
}

declare module 'dooboo-ui' {
  // eslint-disable-next-line @typescript-eslint/no-shadow
  export interface DoobooTheme extends AllTheme {}
}
```

- [Example styled.d.ts](https://github.com/dooboolab/hackatalk/blob/master/client/src/styled.d.ts).

### Media support

`@dooboo-ui/theme` also supports `mediaQuery` with `isMobile`, `isTablet`, and `isDesktop` props. Example below.

```tsx
const Container = styled.View`
  flex-direction: column;
  align-items: flex-start;
  align-self: stretch;

  ${({theme: {isMobile}}) =>
    isMobile &&
    css`
      flex: 1;
      margin-left: 48px;
    `}
`;
```

You can also use `mediaQuery` props inside of react component directly. Example below.

```tsx
import {type ReactElement} from 'react';
import {View} from 'react-native';
import {Typography, useDooboo} from 'dooboo-ui';

export default function Home(): ReactElement {
  const { media: {isDesktop} } = useDooboo();

  return (
    <View>
      <Typography.Heading1
        style={{
          fontSize: isDesktop ? 30 : 20,
        }}
      >
        Hello World
      </Typography.Heading1>
    </View>
  )
```

### Orientation support

If you also want to check the `orientation` change detection, you need to install `@expo/match-media`.

```sh
yarn add @expo/match-media
```

Then import it in your root.

```ts
import '@expo/match-media';
```

After that you can use `isPortrait` props in `@dooboo-ui/theme` to detect the orientation of your app. Example below.

```tsx
const Container = styled.View`
  flex-direction: column;
  align-items: flex-start;
  align-self: stretch;

  ${({theme: {isPortrait}}) =>
    isPortrait &&
    css`
      flex: 1;
      margin-left: 48px;
    `}
`;
```
