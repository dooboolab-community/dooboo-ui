import {Meta} from '@storybook/addon-docs';

<Meta title="Overview/Theming" />

# Theming

> The `theme` module easily provides ability to make `light` and `dark` theme.

## Installation

#### 1. Import

```ts
import {DoobooProvider} from 'dooboo-ui';
```

- if you only want to use `theme` pacakage, you can install it seperately.

  `import {ThemeProvider} from '@dooboo-ui/theme';`

   > Then use `useTheme` from `@dooboo-ui/theme`.

#### 2. Wrap your component with `DoobooProvider` with given customTheme.

```tsx
<DoobooProvider>
  <App />
</DoobooProvider>
```

## Usage

#### 1. Import `useDooboo`

```ts
import {useDooboo} from 'dooboo-ui';
```

#### 2. Retrive theme and use it

```ts
const {theme} = useDooboo();
```

Then use theme props inside your component.

```ts
{
  backgroundColor: theme.background,
  borderBottomColor: theme.primaryLight,
}
```

#### Also availabe with [emotion](https://emotion.sh/docs/@emotion/native).

```tsx
const StyledContainer = styled.SafeAreaView`
  flex: 1;
  background-color: ${({theme}) => theme.bg.basic};
  flex-direction: column;
  align-items: center;
`;
```

#### With Expo

If you are using expo, add below `userInterfaceStyle` to `automatic`.

```ts
userInterfaceStyle: 'automatic',
```

## Customizing theme

#### 1. Define colors for `light` and `dark` theme.

```ts
eexport const colors = {
  primaryLight: '#47498A',
  secondaryLight: '#9E45B3',
  acceptLight: '#6BF3C5',
  infoLight: '#307EF1',
  linkLight: '#A351F4',
  successLight: '#0FC70C',
  warningLight: '#EBBD1A',
  dangerLight: '#F84444',

  primaryDark: '#585DFA',
  secondaryDark: '#C93AEB',
  acceptDark: '#6BF3C5',
  infoDark: '#2998FF',
  linkDark: '#A351F4',
  successDark: '#2FFA86',
  warningDark: '#F4CC3E',
  dangerDark: '#FF3C3C',

  white: '#FFFFFF',
  gray1: '#EDEDED',
  gray2: '#CCCCCC',
  gray3: '#BEBEBE',
  gray4: '#909090',
  gray5: '#787878',
  gray6: '#4D4D4D',
  gray7: '#474747',
  gray8: '#282828',
  gray9: '#1E1E1E',
  black: '#000000',
  red1: '#FF2C2C',
  red2: '#DA0000',
};

export const light = {
  bg: {
    basic: colors.white,
    paper: colors.gray1,
    disabled: colors.gray3,
  },
  role: {
    primary: colors.primaryLight,
    secondary: colors.secondaryLight,
    accent: colors.acceptLight,
    info: colors.infoLight,
    link: colors.linkLight,
    success: colors.successLight,
    warning: colors.warningLight,
    danger: colors.dangerLight,
    border: colors.gray2,
  },
  text: {
    basic: colors.black,
    label: colors.gray6,
    placeholder: colors.gray5,
    disabled: colors.gray3,
    validation: colors.red2,
    contrast: colors.white,
  },
  button: {
    primary: {
      text: colors.white,
      bg: colors.primaryLight,
    },
    secondary: {
      text: colors.white,
      bg: colors.secondaryLight,
    },
    success: {
      text: colors.white,
      bg: colors.successLight,
    },
    warning: {
      text: colors.white,
      bg: colors.warningLight,
    },
    danger: {
      text: colors.white,
      bg: colors.dangerLight,
    },
    info: {
      text: colors.white,
      bg: colors.infoLight,
    },
    light: {
      text: colors.black,
      bg: colors.gray1,
    },
    disabled: {
      text: colors.gray3,
      bg: colors.gray1,
    },
  },
};

export const dark: typeof light = {
  bg: {
    basic: colors.black,
    paper: colors.gray9,
    disabled: colors.gray7,
  },
  role: {
    primary: colors.primaryDark,
    secondary: colors.secondaryDark,
    accent: colors.acceptDark,
    info: colors.infoDark,
    link: colors.linkDark,
    success: colors.successDark,
    warning: colors.warningDark,
    danger: colors.dangerDark,
    border: colors.gray6,
  },
  text: {
    basic: colors.white,
    label: colors.gray3,
    placeholder: colors.gray4,
    disabled: colors.gray6,
    validation: colors.red1,
    contrast: colors.black,
  },
  button: {
    primary: {
      text: colors.black,
      bg: colors.primaryDark,
    },
    secondary: {
      text: colors.black,
      bg: colors.secondaryDark,
    },
    success: {
      text: colors.black,
      bg: colors.successDark,
    },
    warning: {
      text: colors.black,
      bg: colors.warningDark,
    },
    danger: {
      text: colors.black,
      bg: colors.dangerDark,
    },
    info: {
      text: colors.black,
      bg: colors.infoDark,
    },
    light: {
      text: colors.gray1,
      bg: colors.gray8,
    },
    disabled: {
      text: colors.gray7,
      bg: colors.gray9,
    },
  },
};
```

#### 2. Wrap your component with `ThemeProvider` with given customTheme.

```tsx
<ThemeProvider customTheme={{light, dark}}>
  <App />
</ThemeProvider>
```

- [Example theme.ts](https://github.com/dooboolab/hackatalk/blob/master/client/src/theme.ts)

Note that you can type your custom theme type as below
```ts
export type Theme = typeof light & DoobooThemeParams;
```

### Typescript support with [emotion](https://emotion.sh/docs/typescript#define-a-theme)

> Inside `src` dir, add `styled.d.ts`.

```ts
import type {DoobooTheme} from 'dooboo-ui';
import {Theme} from './theme';

type AllTheme = Theme & DoobooTheme;

declare module '@emotion/react' {
  export interface Theme extends AllTheme {}
}

declare module 'dooboo-ui' {
  // eslint-disable-next-line @typescript-eslint/no-shadow
  export interface DoobooTheme extends AllTheme {}
}

```

- [Example styled.d.ts](https://github.com/dooboolab/hackatalk/blob/master/client/src/styled.d.ts).

### Media support

`@dooboo-ui/theme` also supports `mediaQuery` with `isMobile`, `isTablet`, and `isDesktop` props. Example below.

```tsx
const Container = styled.View`
  flex-direction: column;
  align-items: flex-start;
  align-self: stretch;

  ${({theme: {isMobile}}) =>
    isMobile &&
    css`
      flex: 1;
      margin-left: 48px;
    `}
`;
```

### Orientation support

If you also want to check the `orientation` change detection, you need to install `@expo/match-media`.

```sh
yarn add @expo/match-media
```

Then import it in your root.

```ts
import '@expo/match-media';
```

After that you can use `isPortrait` props in `@dooboo-ui/theme` to detect the orientation of your app. Example below.

```tsx
const Container = styled.View`
  flex-direction: column;
  align-items: flex-start;
  align-self: stretch;

  ${({theme: {isPortrait}}) =>
    isPortrait &&
    css`
      flex: 1;
      margin-left: 48px;
    `}
`;
```
